!function(){"use strict";!function(){function e(e,t){return[e[0]*t,e[1]*t]}function t(e,t){return Math.sqrt((e[0]-t[0])**2+(e[1]-t[1])**2)}function i(e,t){let i=e%t;return i<0&&(i+=t),i}function s(e,t,i){return e<i?i:e>t-i?t-i:e}function n(e,t,i){let s=t*Math.sqrt(Math.random()),n=2*Math.random()*Math.PI;return[e[0]+s*Math.cos(n)+i,e[1]+s*Math.sin(n)+i]}function r(e,t){let i=[];for(let s=0;s<6;s++){let n=e[0]+t*Math.cos(2*Math.PI/6*s),r=e[1]+t*Math.sin(2*Math.PI/6*s);i.push([n,r])}return i}var a=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pos=e.pos,this.vel=e.vel,this.radius=e.radius,this.color=e.color,this.game=e.game,this.isBouncy=e.isBouncy,this.background=e.background}move(e){const t=e/16.666666666666668,i=this.vel[0]*t,s=this.vel[1]*t;let n=[this.pos[0]+i,this.pos[1]+s];if(this.isBouncy){let e=this.game.bounce(n,this.radius);e[0]!==n[0]&&(this.vel[0]=-this.vel[0]),e[1]!==n[1]&&(this.vel[1]=-this.vel[1]),this.pos=e}else this.pos=this.game.wrap(n);return this instanceof Bee&&this.decelerate(),this.pos}draw(e){e.fillStyle=this.color,e.beginPath(),e.arc(this.pos[0],this.pos[1],this.radius,0,2*Math.PI,!0),e.drawImage(this.background,this.pos[0]-this.radius,this.pos[1]-this.radius,2*this.radius,2*this.radius)}isCollidedWith(e){return this.radius+e.radius>=t(this.pos,e.pos)}remove(){this.game.remove(this)}};function h(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class o extends a{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.color=o.COLOR,this.radius=o.RADIUS,this.vel=function(t){const i=2*Math.PI*Math.random();return e([Math.sin(i),Math.cos(i)],t)}(o.SPEED),this.isBouncy=o.BOUNCY,this.background=document.getElementById("wasp"),this.waspFlyLeft=document.getElementById("wasp-left-flying"),this.waspFlyRight=document.getElementById("wasp-right-flying"),this.waspStingLeft=document.getElementById("wasp-left-sting"),this.waspStingRight=document.getElementById("wasp-right-sting"),this.spriteFrameCounter=0}draw(e){let t=this.pickFrame(),i=this.pickSprite();e.fillStyle=this.color,e.beginPath(),e.arc(this.pos[0],this.pos[1],this.radius,0,2*Math.PI,!0),e.drawImage(i,t[0],t[1],o.FRAME_WIDTH,o.FRAME_HEIGHT,this.pos[0]-this.radius,this.pos[1]-this.radius,2*this.radius+10,2*this.radius+10)}pickSprite(){return this.distanceToBee()<=o.BEE_STING_DISTANCE?this.beeToRight()?this.waspStingRight:this.waspStingLeft:this.vel[0]>=0?this.waspFlyRight:this.waspFlyLeft}distanceToBee(){return t(this.game.bee.pos,this.pos)}beeToRight(){return this.game.bee.pos[0]>=this.pos[0]}pickFrame(){let e=0,t=0;return e=Math.floor(this.spriteFrameCounter/12)*o.FRAME_HEIGHT,t=Math.floor(this.spriteFrameCounter%12/3)*o.FRAME_WIDTH,this.spriteFrameCounter=(this.spriteFrameCounter+1)%48,[t,e]}}h(o,"RADIUS",30),h(o,"BOUNCY",!0),h(o,"SPEED",.4),h(o,"BEE_STING_DISTANCE",150),h(o,"FRAME_HEIGHT",867),h(o,"FRAME_WIDTH",776),h(o,"COLOR","red");var l=o;function c(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class d extends a{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.color=d.COLOR,this.radius=d.RADIUS,this.vel=d.VEL,this.pos=e.pos,this.game=e.game,this.isBouncy=d.BOUNCY,this.background=document.getElementById("flower")}}c(d,"RADIUS",40),c(d,"COLOR","pink"),c(d,"VEL",[0,0]),c(d,"BOUNCY",!1);var m=d;function u(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const p=.2,g=.007,b=1.03,f=15;class y extends a{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.slide_factor=0,this.slider_increase=!0,this.speed=0,this.color=y.COLOR,this.vel=y.VEL,this.isBouncy=y.BOUNCY,this.radius=y.RADIUS,this.landed=!1,this.launched=!1,this.caught=!1,this.beehiveLand=!1,this.pollinating=!1,this.beeFrameL0=document.getElementById("bee-left-0"),this.beeFrameL1=document.getElementById("bee-left-1"),this.beeFrameL2=document.getElementById("bee-left-2"),this.beeFrameL3=document.getElementById("bee-left-3"),this.beeFrameR0=document.getElementById("bee-right-0"),this.beeFrameR1=document.getElementById("bee-right-1"),this.beeFrameR2=document.getElementById("bee-right-2"),this.beeFrameR3=document.getElementById("bee-right-3"),this.beeFrameU0=document.getElementById("bee-up-0"),this.beeFrameU1=document.getElementById("bee-up-1"),this.beeFrameU2=document.getElementById("bee-up-2"),this.beeFrameU3=document.getElementById("bee-up-3"),this.beeFrameD0=document.getElementById("bee-down-0"),this.beeFrameD1=document.getElementById("bee-down-1"),this.beeFrameD2=document.getElementById("bee-down-2"),this.beeFrameD3=document.getElementById("bee-down-3"),this.beeLeftFrames=[this.beeFrameL0,this.beeFrameL1,this.beeFrameL2,this.beeFrameL3],this.beeRightFrames=[this.beeFrameR0,this.beeFrameR1,this.beeFrameR2,this.beeFrameR3],this.beeUpFrames=[this.beeFrameU0,this.beeFrameU1,this.beeFrameU2,this.beeFrameU3],this.beeDownFrames=[this.beeFrameD0,this.beeFrameD1,this.beeFrameD2,this.beeFrameD3],this.animatedBeeTimer=0,this.framesPerAnimation=3,this.directions={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right"}}landOnBeehive(){this.beehiveLand=!0}notLandOnBeehive(){this.beehiveLand=!1}notPollinate(){this.pollinating=!1}pollinate(){this.pollinating=!0}accelerate(){let e=Math.abs(this.vel[0])>=Math.abs(this.vel[1])?this.vel[0]:this.vel[1];if(Math.abs(e)*b>f){let t=f/Math.abs(e);e===this.vel[0]?(this.vel[0]=this.vel[0]>0?f:-15,this.vel[1]*=t):(this.vel[1]=this.vel[1]>0?f:-15,this.vel[0]*=t)}else this.vel[0]*=b,this.vel[1]*=b;this.game.speedStrips.forEach((e=>{e.press()}))}decelerate(){this.vel.forEach(((e,t)=>{0===e||Math.abs(e)<g?this.vel[t]=0:e<0?this.vel[t]+=g:this.vel[t]-=g})),Math.abs(this.vel[0])+Math.abs(this.vel[1])<=g&&this.launched&&(this.vel=[0,0],this.landed=!0),Math.abs(this.vel[0])+Math.abs(this.vel[1])<=4&&this.launched&&this.game.beehiveSparkles.push(this.game.addBeehiveSparkles())}setTrajectory(e){let t=0;e===this.directions.UP?t=p:e===this.directions.DOWN&&(t=-.2);const i=Math.cos(t),s=Math.sin(t),n=y.START_VEL[0]*i+y.START_VEL[1]*s,r=-y.START_VEL[0]*s+y.START_VEL[1]*i;y.START_VEL=[n,r]}drawTrajectory(e){let t=[this.pos[0]+15*y.START_VEL[0],this.pos[1]+15*y.START_VEL[1]],i=function(e,t){const i=Math.abs(e[0]-t[0]),s=Math.abs(e[1]-t[1]),n=Math.sqrt(i**2+s**2);let r=90-180*Math.atan(s/i)/Math.PI,a=.2*n,h=[];return[1,-1].forEach((i=>{let s=a*Math.cos((r+30*i)*Math.PI/180),n=a*Math.sin((r+30*i)*Math.PI/180),o=e[0]<=t[0]?n:-n,l=e[1]<=t[1]?-s:s;h.push([t[0]-o,t[1]+l])})),h}(this.pos,t);e.beginPath(),e.moveTo(t[0],t[1]),e.lineTo(i[0][0],i[0][1]),e.lineTo(i[1][0],i[1][1]),e.closePath(),e.fillStyle="gold",e.fill()}slideScale(){this.slide_factor>1&&(this.slider_increase=!1),this.slide_factor<0&&(this.slider_increase=!0),this.slider_increase?this.slide_factor+=.01:this.slide_factor-=.01,this.speed=1*this.slide_factor+.75}drawScale(e){let t=100*this.slide_factor;e.fillStyle="gold";let i=[20,380];e.rect(i[0],i[1],1.2*Math.floor(t),10),e.fill()}launch(){this.vel=e(y.START_VEL,this.speed),this.launched=!0}nudge(e){let t=0;e===this.directions.LEFT?t=p:e===this.directions.RIGHT&&(t=-.2);const i=Math.cos(t),s=Math.sin(t),n=this.vel[0]*i+this.vel[1]*s,r=-this.vel[0]*s+this.vel[1]*i;this.vel=[n,r]}capture(){this.caught=!0}drawAnimatedBee(e){e.drawImage(this.pickFrame(),this.pos[0]-y.RADIUS,this.pos[1]-y.RADIUS-5,2*y.RADIUS,2*y.RADIUS),this.animatedBeeTimer=(this.animatedBeeTimer+1)%(this.beeRightFrames.length*this.framesPerAnimation)}pickFrame(){let e=this.beeRightFrames,t=Math.floor(this.animatedBeeTimer/this.framesPerAnimation),i=this.beeDirection();return e={right:this.beeRightFrames,left:this.beeLeftFrames,up:this.beeUpFrames,down:this.beeDownFrames}[i],e[t]}beeDirection(){let e=this.launched?this.vel:y.START_VEL;return Math.abs(e[0])>=Math.abs(e[1])?e[0]>=0?this.directions.RIGHT:this.directions.LEFT:e[1]<=0?this.directions.UP:this.directions.DOWN}}u(y,"RADIUS",40),u(y,"BOUNCY",!0),u(y,"COLOR","yellow"),u(y,"START_VEL",[5,5]),u(y,"VEL",[0,0]);var S=y;function v(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class w extends a{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.color=w.COLOR,this.radius=w.RADIUS,this.vel=w.VEL,this.pos=w.POS,this.game=e.game,this.isBouncy=w.BOUNCY,this.background=document.getElementById("beehive")}}v(w,"RADIUS",80),v(w,"COLOR","white"),v(w,"VEL",[0,0]),v(w,"POS",[80,300]),v(w,"BOUNCY",!1);var E=w;function I(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class P extends a{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.color=P.COLOR,this.radius=P.RADIUS,this.vel=P.VEL,this.pos=e.pos,this.game=e.game,this.isBouncy=P.BOUNCY,this.background=document.getElementById("speedstrip")}press(){this.background=document.getElementById("speedstrip-pressed")}unpress(){this.background=document.getElementById("speedstrip")}}I(P,"RADIUS",30),I(P,"COLOR","black"),I(P,"VEL",[0,0]),I(P,"BOUNCY",!1);var A=P;function D(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const _={RAND_COLORS:["#FF6633","#FFB399","#FF33FF","#FFFF99","#00B3E6","#E6B333","#3366E6","#999966","#99FF99","#B34D4D","#80B300","#809900","#E6B3B3","#6680B3","#66991A","#FF99E6","#CCFF1A","#FF1A66","#E6331A","#33FFCC","#66994D","#B366CC","#4D8000","#B33300","#CC80CC","#66664D","#991AFF","#E666FF","#4DB3FF","#1AB399","#E666B3","#33991A","#CC9999","#B3B31A","#00E680","#4D8066","#809980","#E6FF80","#1AFF33","#999933","#FF3380","#CCCC00","#66E64D","#4D80CC","#9900B3","#E64D66","#4DB380","#FF4D4D","#99E6E6","#6666FF"],POLLEN_DIST:50};class F{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Math.floor(Math.random()*_.RAND_COLORS.length);this.color=_.RAND_COLORS[t],this.game=e.game,this.pollenTimer=0,this.pollenPosition=this.pollenPos(),this.points=r(this.pollenPosition,F.RADIUS)}drawPollen(e){this.pollenTimer>F.PERSISTENCE&&this.game.remove(this),e.fillStyle=this.color,e.beginPath(),this.points.forEach((t=>{e.lineTo(t[0],t[1])})),e.closePath(),e.fill(),this.pollenTimer+=1}pollenPos(){return n(this.game.bee.pos,_.POLLEN_DIST,0)}}D(F,"RADIUS",10),D(F,"PERSISTENCE",15);var T=F;function B(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const M={RAND_COLORS:["#ffff4b","#ffff01","#ffffb9","#ffffff"],SPARKLE_DIST:100};class R{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Math.floor(Math.random()*M.RAND_COLORS.length);this.color=M.RAND_COLORS[t],this.game=e.game,this.sparkleTimer=0,this.sparklePosition=this.sparklePos(),this.points=r(this.sparklePosition,R.RADIUS)}drawSparkle(e){this.sparkleTimer>R.PERSISTENCE&&this.game.remove(this),e.fillStyle=this.color,e.beginPath(),this.points.forEach((t=>{e.lineTo(t[0],t[1])})),e.closePath(),e.fill(),this.sparkleTimer+=1}sparklePos(){return n(this.game.beehive.pos,M.SPARKLE_DIST,0)}}B(R,"RADIUS",7),B(R,"PERSISTENCE",30);var C=R;function L(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class N{constructor(e){for(this.xDim=e.xDim,this.yDim=e.yDim,this.score=0,this.nonOverlapPos=this.generateNonOverlapPos(),this.wasps=[],this.flowers=[],this.speedStrips=[],this.pollens=[],this.beehiveSparkles=[],this.bee=this.addBee(),this.beehive=this.addBeehive(),this.background=document.getElementById("grass");this.wasps.length<N.NUM_WASPS;)this.wasps.push(this.addWasps());this.addFlowers(),this.addSpeedStrips(),this.health=100,this.waspAttackPoints=-1.5,this.flowerHealthPoints=.05,this.beehiveHealthPoints=.1}draw(e){e.clearRect(0,0,this.xDim,this.yDim);const t=e.createPattern(this.background,"repeat");e.fillStyle=t,e.fillRect(0,0,this.xDim,this.yDim),this.flowers.forEach((t=>t.draw(e))),this.beehive.draw(e),this.beehiveSparkles.forEach((t=>t.drawSparkle(e))),this.speedStrips.forEach((t=>{t.draw(e)})),this.wasps.forEach((t=>t.draw(e))),this.drawHealth(e),this.bee.drawAnimatedBee(e),this.pollens.forEach((t=>t.drawPollen(e))),this.bee.launched||(this.bee.drawTrajectory(e),this.bee.drawScale(e))}moveObjects(e){this.wasps.forEach((t=>t.move(e))),this.bee.move(e)}wrap(e){return[i(e[0],this.xDim),i(e[1],this.yDim)]}bounce(e,t){return[s(e[0],this.xDim,t),s(e[1],this.yDim,t)]}step(e){this.moveObjects(e),this.checkCollisions(),this.bee.launched||this.bee.slideScale()}allNonBeeObjects(){return[].concat(this.flowers,[this.beehive],this.speedStrips,this.wasps)}checkCollisions(){let e=this.allNonBeeObjects();this.bee.notPollinate(),this.speedStrips.forEach((e=>{e.unpress()}));for(let t=0;t<e.length;t++){const i=e[t];i.isCollidedWith(this.bee)&&(i instanceof l&&this.updateHealth(this.waspAttackPoints),i instanceof m&&(this.addPoints(),this.updateHealth(this.flowerHealthPoints),this.bee.pollinate(),this.pollens.push(this.addPollens())),i instanceof A&&(this.bee.accelerate(),i.press()),i instanceof E&&this.bee.landed&&this.bee.landOnBeehive(),i instanceof E&&!this.bee.landed&&this.bee.launched&&this.addPoints(this.beehiveHealthPoints))}}addPoints(){this.bee.caught&&(this.score=0),this.bee.landed&&this.beehive.isCollidedWith(this.bee)&&(this.score+=100),this.gameOver()||(this.score+=1)}gameOver(){return this.bee.landed||this.bee.caught}addWasps(){return new l({pos:this.randomPosition(!0),game:this})}addFlowers(){this.nonOverlapPos.slice(N.NUM_SPEEDSTRIPS).forEach((e=>{let t=new m({pos:e,game:this});this.flowers.push(t)}))}addPollens(){return new T({game:this})}addBeehiveSparkles(){return new C({game:this})}addBeehive(){return new E({pos:[80,.5*this.yDim],game:this})}addSpeedStrips(){this.nonOverlapPos.slice(0,N.NUM_SPEEDSTRIPS).forEach((e=>{let t=new A({pos:e,game:this});this.speedStrips.push(t)}))}addBee(){return new S({pos:[80,.5*this.yDim],game:this})}randomPosition(e){let t=0;!0===e&&(t=.35);let i=[Math.floor(Math.random()*((.85-t)*this.xDim)+(.15+t)*this.xDim),Math.floor(Math.random()*this.yDim)];return i.forEach(((e,t)=>{e<40&&(i[t]+=40),(0===t&&e>this.xDim-40||1===t&&e>this.yDim-40)&&(i[t]-=40)})),i}generateNonOverlapPos(){const e=[],i=N.NUM_FLOWERS+N.NUM_SPEEDSTRIPS<25?80:0;for(0===i&&console.log("Number of flowers and/or speed strips exceeds safe limits for game screen size. Non-crowding is no longer enforced.");e.length<N.NUM_FLOWERS+N.NUM_SPEEDSTRIPS;){const s=this.randomPosition();let n=!0;for(let r=0;r<e.length;r++)if(t(s,e[r])<i){n=!1;break}n&&e.push(s)}return e}remove(e){e instanceof l&&this.wasps.splice(this.wasps.indexOf(e),1),e instanceof T&&this.pollens.splice(this.pollens.indexOf(e),1),e instanceof C&&this.beehiveSparkles.splice(this.beehiveSparkles.indexOf(e),1)}updateHealth(e){this.health+=e,this.health<=0?this.bee.capture():this.health>100&&(this.health=100)}drawHealth(e){let t=Math.ceil(this.health);const i=[10,100];let s;switch(e.font="35pt Delicious Handrawn",!0){case t<20:s="DarkRed";break;case t<40:s="orange";break;case t<60:s="Gold";break;case t<80:s="LawnGreen";break;default:s="DarkGreen"}e.fillStyle=s,e.fillText(`♥ ${t}%`,i[0],i[1]),e.strokeStyle="black",e.lineWidth=1,e.strokeText(`♥ ${t}%`,i[0],i[1])}}L(N,"DIM_X",1200),L(N,"DIM_Y",600),L(N,"NUM_WASPS",3),L(N,"NUM_FLOWERS",15),L(N,"NUM_SPEEDSTRIPS",1);var O=N;function x(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const k={LINE_SPACING:100,LOSE_MSG:["Bee-tter luck next time!","Looks like you got stung with a loss!","Bee-ginning of success is not here!","Not the bee's knees this time!","Sorry, you didn't make the buzz this time.","You got swatted like a fly and lost!","Bee-ware, losing is a sticky situation!","Wasp that a loss? Yes it wasp!"],WIN_MSG:["Bee-autiful work!","Buzzing with excitement, you're the winner!","You earned your stripes like a bee and won!","You're as busy as a bee and just as successful!","Buzz-tastic!","Hive five for a job well done!","Buzz-tacular effort!","You've stung the competition and emerged a winner!","Wasp that a WIN? Yes it wasp!"]};class U{constructor(e){this.ctx=e,this.announcementR=document.getElementById("announcement-red"),this.announcementW=document.getElementById("announcement-white"),this.announcementG=document.getElementById("announcement-green"),this.wasp1=document.getElementById("wasp-left-flying"),this.wasp2=document.getElementById("wasp-left-sting"),this.flower=document.getElementById("flower-med"),this.beehive=document.getElementById("beehive"),this.launchMechanic=document.getElementById("launch-mechanic"),this.flyMechanic=document.getElementById("fly-mechanic"),this.highScore=0,this.bindKeyHandlers(),this.directions={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right"},this.messageType={WIN:"win",LOSE:"lose"}}bindKeyHandlers(){key("i",(()=>{this.iKeyHandler()})),key("w",(()=>{this.wKeyHandler()})),key("s",(()=>{this.sKeyHandler()})),key("space",(()=>{this.spaceKeyHandler()})),key("a",(()=>{this.aKeyHandler()})),key("d",(()=>{this.dKeyHandler()})),key("up",(()=>{this.wKeyHandler()})),key("down",(()=>{this.sKeyHandler()})),key("right",(()=>{this.dKeyHandler()})),key("left",(()=>{this.aKeyHandler()}))}spaceKeyHandler(){this.game&&!this.game.bee.launched&&this.game.bee.launch()}aKeyHandler(){let e=this.game.bee.beeDirection();this.game.bee.launched?this.game.bee.nudge({up:"left",down:"right",left:"",right:""}[e]):this.game.bee.launched||this.game.bee.setTrajectory(this.directions.UP)}wKeyHandler(){let e=this.game.bee.beeDirection();this.game.bee.launched?this.game.bee.nudge({up:"",down:"",left:"right",right:"left"}[e]):this.game.bee.launched||this.game.bee.setTrajectory(this.directions.UP)}sKeyHandler(){let e=this.game.bee.beeDirection();this.game.bee.launched?this.game.bee.nudge({up:"",down:"",left:"left",right:"right"}[e]):this.game.bee.launched||this.game.bee.setTrajectory(this.directions.DOWN)}dKeyHandler(){let e=this.game.bee.beeDirection();this.game.bee.launched?this.game.bee.nudge({up:"right",down:"left",left:"",right:""}[e]):this.game.bee.launched||this.game.bee.setTrajectory(this.directions.DOWN)}iKeyHandler(){this.running?(this.pause(),this.drawInstructions()):this.play(this.lastTime)}restart(){this.running=!1,this.score=0,this.lastTime=0,this.animationFrameId&&cancelAnimationFrame(this.animationFrameId),this.game=new O({xDim:U.CANVAS_DIM_X,yDim:U.CANVAS_DIM_Y}),this.play(this.lastTime)}play(e){this.running=!0,this.animate(e)}pause(){this.running=!1,this.animate(this.lastTime)}animate(e){if(this.running){void 0===this.lastTime&&(this.lastTime=e);const t=e-this.lastTime;this.game.step(t),this.game.draw(this.ctx),this.drawScore()}else this.drawInstructions(),this.animationFrameId&&cancelAnimationFrame(this.animationFrameId);this.game.gameOver()?this.game.bee.caught?(this.tallyPoints(),this.drawLosePage()):(this.tallyPoints(),this.drawWinPage()):this.animationFrameId=requestAnimationFrame(this.animate.bind(this)),this.lastTime=e}tallyPoints(){this.game.addPoints(),this.highScore=Math.max(this.highScore,this.game.score),document.getElementById("score-banner").innerHTML=`Your top score: ${this.highScore}`}drawScore(){const e=[10,50];this.ctx.font="40pt Delicious Handrawn",this.ctx.fillStyle="yellow",this.ctx.fillText(`Score: ${this.game.score}`,e[0],e[1])}drawWinPage(){this.ctx.clearRect(0,0,U.CANVAS_DIM_X,U.CANVAS_DIM_Y);const e=this.ctx.createPattern(this.announcementG,"repeat");this.ctx.fillStyle=e,this.ctx.fillRect(0,0,U.CANVAS_DIM_X,U.CANVAS_DIM_Y);const t=[40,220];this.ctx.font="35pt Delicious Handrawn",this.ctx.fillStyle="black";let i=this.message(this.messageType.WIN),s=this.game.score>0?i:"You avoided wasps, but got 0 points :(",n=this.game.bee.beehiveLand?"You landed on the beehive - score!":"";this.ctx.fillText(s,t[0],t[1]),this.ctx.fillText(`Score: ${this.game.score}! ${n}`,t[0],t[1]+k.LINE_SPACING);let r=this.game.score===this.highScore&&0!==this.game.score?"That's a new high score!":"";this.ctx.fillText(r,t[0],t[1]+2*k.LINE_SPACING),this.ctx.drawImage(this.game.bee.beeFrameL0,700,150)}drawLosePage(){this.ctx.clearRect(0,0,U.CANVAS_DIM_X,U.CANVAS_DIM_Y);const e=this.ctx.createPattern(this.announcementR,"repeat");this.ctx.fillStyle=e,this.ctx.fillRect(0,0,U.CANVAS_DIM_X,U.CANVAS_DIM_Y);const t=[40,80];this.ctx.font="30pt Delicious Handrawn",this.ctx.fillStyle="yellow",this.ctx.fillText("The wasps caught you!",t[0],t[1]);let i=this.message(this.messageType.LOSE);this.ctx.fillText(i,t[0],t[1]+k.LINE_SPACING),this.ctx.drawImage(this.wasp1,0,0,776,867,700,100,500/867*776,500),this.ctx.fillText("PRESS and HOLD the keys to control the bee!",t[0],t[1]+2*k.LINE_SPACING),this.ctx.drawImage(this.flyMechanic,t[0],325,320,240)}message(e){let t=e===this.messageType.WIN?k.WIN_MSG:k.LOSE_MSG;return t[Math.floor(Math.random()*t.length)]}drawInstructions(){this.ctx.clearRect(0,0,U.CANVAS_DIM_X,U.CANVAS_DIM_Y);const e=this.ctx.createPattern(this.announcementW,"repeat");this.ctx.fillStyle=e||"yellow",this.ctx.fillRect(0,0,U.CANVAS_DIM_X,U.CANVAS_DIM_Y);const t=[40,100];this.ctx.font="25pt Delicious Handrawn",this.ctx.fillStyle="black",this.ctx.fillText("Help Bouncy Bee collect the most nectar!",t[0],t[1]),this.ctx.fillText("Launch Bouncy Bee like a cannon AND nudge it as it flies. Try to:",t[0]+60,t[1]+100),this.ctx.fillText("1. Visit the most flowers - they give you points and health",t[0]+k.LINE_SPACING,t[1]+2*k.LINE_SPACING),this.ctx.fillText("2. Avoid the wasps!!!",t[0]+k.LINE_SPACING,t[1]+3*k.LINE_SPACING),this.ctx.fillText("3. Land (slide to a stop) on the beehive for extra points",t[0]+k.LINE_SPACING,t[1]+4*k.LINE_SPACING),this.ctx.drawImage(this.launchMechanic,860,0,340,340),this.ctx.drawImage(this.flyMechanic,860,350,340,250)}drawWaitPage(){this.ctx.clearRect(0,0,U.CANVAS_DIM_X,U.CANVAS_DIM_Y),this.ctx.fillStyle="yellow",this.ctx.fillRect(0,0,U.CANVAS_DIM_X,U.CANVAS_DIM_Y)}startGame(){document.getElementById("welcome-screen").classList.add("hidden"),document.getElementById("game-canvas").classList.remove("hidden"),this.restart()}}x(U,"CANVAS_DIM_X",1200),x(U,"CANVAS_DIM_Y",600);var H=U;window.MovingObject=a,window.GameView=H,window.Game=O,window.Bee=S,window.Wasp=l,window.Flower=m,window.Beehive=E,window.SpeedStrip=A;let j=document.createElement("img");j.src="assets/grass_smallest.jpeg",j.setAttribute("id","grass"),j.classList.add("hidden"),document.querySelector("body").appendChild(j);let V=document.createElement("img");V.src="assets/flower_small.png",V.setAttribute("id","flower"),V.classList.add("hidden"),document.querySelector("body").appendChild(V);let W=document.createElement("img");W.src="assets/flower_med.png",W.setAttribute("id","flower-med"),W.classList.add("hidden"),document.querySelector("body").appendChild(W);let G=document.createElement("img");G.src="assets/speed_small.png",G.setAttribute("id","speedstrip"),G.classList.add("hidden"),document.querySelector("body").appendChild(G);let Y=document.createElement("img");Y.src="assets/speed_small_pressed.png",Y.setAttribute("id","speedstrip-pressed"),Y.classList.add("hidden"),document.querySelector("body").appendChild(Y);let K=document.createElement("img");K.src="assets/beehive_med_transparent.png",K.setAttribute("id","beehive"),K.classList.add("hidden"),document.querySelector("body").appendChild(K);let q=document.createElement("img");q.src="assets/announcement_r.jpg",q.setAttribute("id","announcement-red"),q.classList.add("hidden"),document.querySelector("body").appendChild(q);let X=document.createElement("img");X.src="assets/announcement_g.jpeg",X.setAttribute("id","announcement-green"),X.classList.add("hidden"),document.querySelector("body").appendChild(X);const z=document.getElementsByTagName("canvas")[0];z.height=H.CANVAS_DIM_Y,z.width=H.CANVAS_DIM_X;const $=document.getElementById("game-canvas").getContext("2d");document.addEventListener("DOMContentLoaded",(e=>{const t=new H($);t.drawWaitPage(),document.addEventListener("keydown",(e=>{"b"!==e.key&&"B"!==e.key||t.startGame()}))}))}()}();
//# sourceMappingURL=main.js.map